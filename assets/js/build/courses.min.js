!function(i,d){var n={currentViewMode:function(e){for(var s=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var r=t[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(s))return r.substring(s.length,r.length)}return null}("MasteriyoCoursesViewMode"),viewModeItems:null,init:function(){this.viewModeItems=i(".masteriyo-courses-view-mode-item"),this.bindUIActions(),"grid-view"!==this.currentViewMode&&"list-view"!==this.currentViewMode||this.setViewMode(this.currentViewMode),i(document).ready(function(){n.init_password_projected_form_handler()})},bindUIActions:function(){this.viewModeItems.on("click",".view-mode",function(){var e=i(this).data("mode");n.setViewMode(e),n.viewModeItems.removeClass("active"),i(this).closest(".masteriyo-courses-view-mode-item").addClass("active")})},setViewMode:function(e){var s="MasteriyoCoursesViewMode",t=e,o=365,r="",o=(o&&((a=new Date).setTime(a.getTime()+864e5*o),r="; expires="+a.toGMTString()),document.cookie=s+"="+t+r+"; path=/",i(".masteriyo-courses-view-mode-section .masteriyo-courses-view-mode-item-lists").data("courses-class")||"masteriyo-course"),a=i(".masteriyo-course-list-display-section ."+o);a.removeClass("list-view"),a.removeClass("grid-view"),n.viewModeItems.removeClass("active"),this.viewModeItems.find('.view-mode[data-mode="'+e+'"]').parent().addClass("active"),a.addClass(e),this.currentViewMode=e},init_password_projected_form_handler:function(){var e=i(".masteriyo-password-protected"),s=0,t=i("#masteriyoCoursePasswordProtectedModal .masteriyo-submit"),o=t.text(),r=o;function a(e){e.preventDefault(),r=t.data("loading-text"),t.text(r),t.prop("disabled",!0);e=i("#masteriyoPostPassword").val();e?i.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_password_protection",nonce:d.password_protected_nonce,password:e,course_id:s},url:d.ajaxURL,success:function(e){r=o,t.text(r),t.prop("disabled",!1),e.success?(i("#masteriyoPostPassword").val(""),i("#passwordError").text(""),i("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden"),e.data&&e.data.start_url&&window.open(e.data.start_url)):e.data&&e.data.message&&i("#passwordError").text(e.data.message).show()},error:function(e){r=o,t.text(r),t.prop("disabled",!1);var s="An error occurred";e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message&&(s=e.responseJSON.data.message),i("#passwordError").text(s).show()}}):d.labels&&d.labels.password_not_empty&&(i("#passwordError").text(d.labels.password_not_empty).show(),r=o,t.text(r),t.prop("disabled",!1))}e.on("click",function(e){e.preventDefault(),s=i(this).attr("href").split("=")[1],i("#masteriyoCoursePasswordProtectedModal").removeClass("masteriyo-hidden")}),i("#masteriyoCoursePasswordProtectedModal .masteriyo-cancel").on("click",function(e){e.preventDefault(),i("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden")}),i("#masteriyoCoursePasswordProtectedModal form").on("submit",function(e){e.preventDefault()}),i("#masteriyoCoursePasswordProtectedModal .masteriyo-submit").on("click",function(e){a(e)}),i("#masteriyoCoursePasswordProtectedModal form").keypress(function(e){13==e.which&&a(e)})}};n.init()}(jQuery,window.masteriyo_data);