function masteriyo_select_single_course_page_tab(e,t){jQuery(".masteriyo-single-course--main__content .masteriyo-tab.active-tab").removeClass("active-tab"),jQuery(".masteriyo-single-course--main__content .tab-content").addClass("masteriyo-hidden"),jQuery(e.target).addClass("active-tab"),jQuery(".masteriyo-single-course--main__content "+t).removeClass("masteriyo-hidden")}function masteriyoSelectSingleCoursePageTabById(e){e=jQuery(e.target),e.closest(".masteriyo-single-body__main--tabbar").find(".active-item").removeClass("active-item"),e.addClass("active-item"),e=e.data("tab-id"),e=jQuery("#"+e);e.closest(".masteriyo-single-body__main--content").children().addClass("masteriyo-hidden"),e.removeClass("masteriyo-hidden")}!function(c,l){var a=function(e,t){e=l.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;t.force_delete?e+="?force_delete=true":e+="?force_delete=false",c.ajax({type:"delete",headers:{"X-WP-Nonce":l.nonce},url:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},o=function(e,t){var o=l.rootApiUrl+"masteriyo/v1/courses/reviews";c.ajax({type:"post",headers:{"X-WP-Nonce":l.nonce},url:o,data:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},s=function(e,t,o){e=l.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;c.ajax({type:"put",headers:{"X-WP-Nonce":l.nonce},url:e,data:t,success:o.onSuccess,error:o.onError,complete:o.onComplete})},n=function(e,t){c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_reviews_infinite_loading",nonce:l.reviews_listing_nonce,page:e.page,search:e.search,rating:e.rating,course_id:l.course_id},url:l.ajaxURL,success:t.onSuccess,error:t.onError,complete:t.onComplete})},t=function(){c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_complete",nonce:l.course_complete_nonce,course_id:l.course_id},url:l.ajaxURL,success:function(e){e.success&&location.reload()},error:function(e,t,o){console.log(e)}})},d=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-danger-msg"><span>'+e+"</span></div>"},m=function(e){return'<div class="masteriyo-notify-message masteriyo-alert masteriyo-success-msg"><span>'+e+"</span></div>"},u=function(e){e.find(".masteriyo-notify-message").remove()},_=function(e){for(e=""===e?0:e,e=parseFloat(e),html="",e=(e=e>(max_rating=l.max_course_rating)?max_rating:e)<0?0:e,stars=l.rating_indicator_markup,rating_floor=Math.floor(e),i=1;i<=rating_floor;i++)html+=stars.full_star;for(rating_floor<e&&(html+=stars.half_star),rating_ceil=Math.ceil(e),i=rating_ceil;i<max_rating;i++)html+=stars.empty_star;return html},y=function(t={}){c(document.body).append(c(".masteriyo-confirm-delete-course-review-modal-content").html()),c(".masteriyo-modal-confirm-delete-course-review .masteriyo-cancel").on("click",function(){c(this).closest(".masteriyo-overlay").remove()}),c(".masteriyo-modal-confirm-delete-course-review .masteriyo-delete").on("click",function(){var e=c(this).closest(".masteriyo-overlay");e.find(".masteriyo-cancel").attr("disabled",!0),c(this).text(l.labels.deleting),"function"==typeof t.onConfirm&&t.onConfirm(function(){e.remove()})})},p={$create_review_form:c(".masteriyo-submit-review-form"),create_review_form_class:".masteriyo-submit-review-form",init:function(){c(document).ready(function(){p.init_sticky_sidebar(),p.init_rating_widget(),p.init_course_reviews_menu(),p.init_curriculum_accordions_handler(),p.init_create_reviews_handler(),p.init_edit_reviews_handler(),p.init_delete_reviews_handler(),p.init_reply_btn_handler(),p.init_course_reviews_loader(),p.init_password_projected_form_handler(),p.init_course_retake_handler(),p.init_course_complete_handler(),p.init_course_code_copy(),p.init_layout_1_curriculum_accordions_handler()})},init_course_reviews_menu:function(){c(document.body).on("click",".menu-toggler",function(){0==c(this).siblings(".menu").height()?(c(this).siblings(".menu").height("auto"),c(this).siblings(".menu").css("max-height","999px")):c(this).siblings(".menu").height(0)}),c(".masteriyo-dropdown .menu li").on("click",function(){c(this).closest(".menu").height(0)}),c(document.body).click(function(e){0<c(".masteriyo-dropdown").has(e.target).length||c(".masteriyo-dropdown .menu").height(0)})},init_rating_widget:function(){var o=!1,i=null;p.$create_review_form.on("mouseover",function(e){e=c(e.target).closest(".masteriyo-rating-input-icon");if(0===e.length)return o?void 0:(t=p.$create_review_form.find('input[name="rating"]').val(),p.$create_review_form.find(".masteriyo-rstar").html(_(t)),o=!0,void(i=null));var t=e.index()+1,e=e.closest(".masteriyo-rstar");o=!1,i!==t&&(i=t,e.html(_(t)),e.find(".masteriyo-rating-input-icon").on("click",function(){var e=c(this).index()+1;p.$create_review_form.find('input[name="rating"]').val(e),c(this).closest(".masteriyo-rstar").html(_(e))}))})},init_create_reviews_handler:function(){var t=!1;p.$create_review_form.on("submit",function(e){e.preventDefault();var i=p.$create_review_form,r=i.find('button[type="submit"]'),e={title:i.find('input[name="title"]').val(),rating:i.find('input[name="rating"]').val(),content:i.find('[name="content"]').val(),parent:i.find('[name="parent"]').val(),course_id:i.find('[name="course_id"]').val()};t||"yes"===i.data("edit-mode")||(t=!0,r.text(l.labels.submitting),u(i),o(e,{onSuccess:function(){i.append(m(l.labels.submit_success)),i.trigger("reset"),window.location.reload()},onError:function(e,t,o){e.responseJSON&&e.responseJSON.message&&(o=e.responseJSON.message),i.append(d(o)),r.text(l.labels.submit)},onComplete:function(){t=!1}}))})},init_reply_btn_handler:function(){c(document.body).on("click",".masteriyo-reply-course-review, .masteriyo-single-body__main--review-list-content-reply-btn",function(e){e.preventDefault();var e=p.$create_review_form,t=c(this).closest(".masteriyo-course-review"),o=t.data("id"),i=e.find('button[type="submit"]'),t=t.find(".title").data("value");e.find('input[name="title"]').val(""),e.find('input[name="rating"]').val(0),e.find(".masteriyo-rstar").html(_(0)),e.find('[name="content"]').val(""),e.find('[name="parent"]').val(o),i.text(l.labels.submit),c(".masteriyo-form-title").text(l.labels.reply_to+": "+t),e.find(".masteriyo-title, .masteriyo-rating").hide(),e.find('[name="content"]').focus(),c("html, body").animate({scrollTop:e.offset().top},500)})},init_edit_reviews_handler:function(){c(document.body).on("click",".masteriyo-edit-course-review",function(e){e.preventDefault();var e=p.$create_review_form,t=c(this).closest(".masteriyo-course-review"),o=t.data("id"),i=e.find('button[type="submit"]'),r=t.find(".title").data("value"),s=t.find(".rating").data("value"),a=t.find(".content").data("value"),n=t.find('[name="parent"]').val();e.data("edit-mode","yes"),e.data("review-id",o),e.find('input[name="title"]').val(r),e.find('input[name="rating"]').val(s),e.find(".masteriyo-rstar").html(_(s)),e.find('[name="content"]').val(a),e.find('[name="parent"]').val(n),i.text(l.labels.update),(t.is(".is-course-review-reply")?(c(".masteriyo-form-title").text(l.labels.edit_reply),e.find(".masteriyo-title, .masteriyo-rating").hide(),e.find('[name="content"]')):(c(".masteriyo-form-title").text(l.labels.edit_review+": "+r),e.find(".masteriyo-title, .masteriyo-rating").show(),e.find('input[name="title"]'))).focus(),c("html, body").animate({scrollTop:e.offset().top},500)});var o=!1;p.$create_review_form.on("submit",function(e){e.preventDefault();var i=p.$create_review_form,e=i.data("review-id"),r=i.find('button[type="submit"]'),t={title:i.find('input[name="title"]').val(),rating:i.find('input[name="rating"]').val(),content:i.find('[name="content"]').val(),parent:i.find('[name="parent"]').val(),course_id:i.find('[name="course_id"]').val()};o||"yes"!==i.data("edit-mode")||(o=!0,r.text(l.labels.submitting),u(i),s(e,t,{onSuccess:function(){i.append(m(l.labels.update_success)),r.text(l.labels.update),i.trigger("reset"),window.location.reload()},onError:function(e,t,o){e.responseJSON&&e.responseJSON.message&&(o=e.responseJSON.message),i.append(d(o)),r.text(l.labels.update)},onComplete:function(){o=!1}}))})},init_delete_reviews_handler:function(){var s={};c(document.body).on("click",".masteriyo-delete-course-review",function(e){e.preventDefault();var i=c(this).closest(".masteriyo-course-review"),r=c(this),t=i.data("id"),o=c("[name=parent][value="+t+"]");s[t]||y({onConfirm:function(e){s[t]=!0,a(t,{force_delete:0===o.length,onSuccess:function(){var e,t;i.hasClass("is-course-review-reply")?(e=0===i.siblings().length,t=i.closest(".masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists").prev(),e&&t.hasClass("masteriyo-delete-review-notice")&&t.fadeOut(500,function(){c(this).remove()}),i.fadeOut(500,function(){e&&i.closest(".masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists").remove(),c(this).remove()})):(i.next().hasClass("masteriyo-course-review-replies, .masteriyo-single-body__main--reply-lists")&&i.after(l.review_deleted_notice),i.remove())},onError:function(e,t,o){e.responseJSON&&e.responseJSON.message&&(o=e.responseJSON.message),i.append(d(o)),r.find(".text").text(l.labels.delete)},onComplete:function(){s[t]=!1,e()}})}})})},init_course_retake_handler:function(){c(document.body).on("click",".masteriyo-retake-btn",function(e){e.preventDefault(),c(document.body).append(c(".masteriyo-confirm-retake-course-modal-content").html()),c(".masteriyo-modal-confirm-retake-course .masteriyo-cancel").on("click",function(){c(this).closest(".masteriyo-overlay").remove()}),c(".masteriyo-modal-confirm-retake-course .masteriyo-confirm").on("click",function(){window.location.href=l.retake_url,c(this).closest(".masteriyo-overlay").find(".masteriyo-cancel").attr("disabled",!0),c(this).text(l.labels.loading)})})},init_sticky_sidebar:function(){var i=c(".masteriyo-single-course--main").get(0);i&&c(window).scroll(function(){var e=c(window).scrollTop(),t=i.offsetTop,o=t+i.offsetHeight;(t<e&&e<o?!0:!1)?c(".masteriyo-single-course-stick").css({position:"sticky",top:"7.5rem"}):c(".masteriyo-single-course-stick").css({position:"relative",top:"0"})})},init_curriculum_accordions_handler:function(){c(document.body).on("click",".masteriyo-cheader",function(){c(this).parent(".masteriyo-stab--citems").toggleClass("active"),c(".masteriyo-stab--citems").length===c(".masteriyo-stab--citems.active").length&&t(),c(".masteriyo-stab--citems").length===c(".masteriyo-stab--citems").not(".active").length&&o()});var e=!0;function t(){c(".masteriyo-stab--citems").addClass("active"),c(".masteriyo-expand-collapse-all").text(l.labels.collapse_all),e=!1}function o(){c(".masteriyo-stab--citems").removeClass("active"),c(".masteriyo-expand-collapse-all").text(l.labels.expand_all),e=!0}c(document.body).on("click",".masteriyo-expand-collapse-all",function(){(e?t:o)()})},init_course_reviews_loader:function(){var e=!1,t=1;c("button.masteriyo-load-more").on("click",function(){var i;e||(i=c(this),e=!0,i.text(l.labels.loading),n({page:t+1,search:"",rating:""},{onSuccess:function(e){e.success&&((t+=1)>=l.course_review_pages&&i.remove(),c(".masteriyo-course-reviews-list").append(e.data.html),c(".course-reviews .masteriyo-danger-msg").remove())},onError:function(e,t,o){o=(o=e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message?e.responseJSON.data.message:o)||l.labels.see_more_reviews;c(".course-reviews .masteriyo-danger-msg").length||i.after(d(o))},onComplete:function(){e=!1,i.text(l.labels.see_more_reviews)}}))}),c(document.body).on("click change","button#masteriyo-course-reviews-search-button, select#masteriyo-course-reviews-ratings-select",function(){p.handleCourseReviewSearchAndFilter()}),c("input#masteriyo-course-reviews-search-field").on("keypress",function(e){13===e.which&&p.handleCourseReviewSearchAndFilter()})},handleCourseReviewSearchAndFilter:function(){var i=c("button#masteriyo-course-reviews-search-button"),t=c("button.masteriyo-load-more"),o=i.siblings("input").val(),r=c("select#masteriyo-course-reviews-ratings-select").val();(o||r)&&(isLoadingReviews=!0,currentPage=1,n({page:currentPage,search:o,rating:r},{onSuccess:function(e){e.success&&(searchText=o,rating=r,e.data.view_load_more_button?t.show():t.hide(),c(".masteriyo-course-reviews-list, .masteriyo-single-body__main--review-lists").html(e.data.html),c(".course-reviews .masteriyo-danger-msg").remove())},onError:function(e,t,o){searchText="",rating="",o=(o=e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message?e.responseJSON.data.message:o)||l.labels.see_more_reviews,c(".course-reviews .masteriyo-danger-msg").length||i.parents(".masteriyo-course-reviews-filters, .masteriyo-single-body__main--user-review__search-rating").after(d(o))},onComplete:function(){isLoadingReviews=!1}}))},init_password_projected_form_handler:function(){var e=c(".masteriyo-password-protected"),t=0,o=c("#masteriyoCoursePasswordProtectedModal .masteriyo-submit"),i=o.text(),r=i;function s(e){e.preventDefault(),r=o.data("loading-text"),o.text(r),o.prop("disabled",!0);e=c("#masteriyoPostPassword").val();e?c.ajax({type:"POST",dataType:"json",data:{action:"masteriyo_course_password_protection",nonce:l.password_protected_nonce,password:e,course_id:t},url:l.ajaxURL,success:function(e){r=i,o.text(r),o.prop("disabled",!1),e.success?(c("#masteriyoPostPassword").val(""),c("#passwordError").text(""),c("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden"),e.data&&e.data.start_url&&window.open(e.data.start_url)):e.data&&e.data.message&&c("#passwordError").text(e.data.message).show()},error:function(e){r=i,o.text(r),o.prop("disabled",!1);var t="An error occurred";e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.message&&(t=e.responseJSON.data.message),c("#passwordError").text(t).show()}}):l.labels&&l.labels.password_not_empty&&(c("#passwordError").text(l.labels.password_not_empty).show(),r=i,o.text(r),o.prop("disabled",!1))}e.on("click",function(e){e.preventDefault(),t=c(this).attr("href").split("=")[1],c("#masteriyoCoursePasswordProtectedModal").removeClass("masteriyo-hidden")}),c("#masteriyoCoursePasswordProtectedModal .masteriyo-cancel").on("click",function(e){e.preventDefault(),c("#masteriyoCoursePasswordProtectedModal").addClass("masteriyo-hidden")}),c("#masteriyoCoursePasswordProtectedModal form").on("submit",function(e){e.preventDefault()}),c("#masteriyoCoursePasswordProtectedModal .masteriyo-submit").on("click",function(e){s(e)}),c("#masteriyoCoursePasswordProtectedModal form").keypress(function(e){13==e.which&&s(e)})},init_course_complete_handler:function(){c(document.body).on("click",".masteriyo-course-complete",function(e){e.preventDefault();e=c(this).data("course-id");t(e)})},init_course_code_copy(){c(document.body).on("click",".copy-button-code",function(e){e.preventDefault();e=c(".masteriyo-copy-this-text").text();navigator.clipboard.writeText(e);c(this).html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path d="m12 15 2 2 4-4"/><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>'),setTimeout(()=>{c(this).html(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
				<path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
			</svg>`)},2e3)})},init_layout_1_curriculum_accordions_handler:function(){var e=c(".masteriyo-single-body__main--curriculum-content-bottom__accordion--header"),i=c(".masteriyo-single-body__main--curriculum-content-top--expand-btn"),r=c(".masteriyo-single-body__main--curriculum-content-bottom__accordion");e.on("click",function(){c(this).parent(".masteriyo-single-body__main--curriculum-content-bottom__accordion").toggleClass("active")}),i.on("click",function(){var e=i.data("expanded"),t=i.data("collapse-all-text"),o=i.data("expand-all-text");e?(r.removeClass("active"),i.data("expanded",!1).text(o)):(r.addClass("active"),i.data("expanded",!0).text(t))})}};p.init()}(jQuery,window.masteriyo_data);