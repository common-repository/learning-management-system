!function(o,c){var u={init:function(){this.bindUIActions()},bindUIActions:function(){o(".masteriyo-surecart-course-btn").on("click",this.checkSurecartCourseActivity.bind(this)),o(".masteriyo-surecart-course__exit-popup").on("click",this.closeSurecartCoursesModal.bind(this))},checkSurecartCourseActivity:function(t){var e;t.preventDefault(),"started"===o(t.target).data("course-activity").replace(/^['"]|['"]$/g,"")?(e=o(t.target).attr("href"),window.open(e,"_blank")):this.checkSurecartCoursePrices(t)},checkSurecartCoursePrices:function(t){var e;t.preventDefault(),"single"===o(t.target).data("prices-count").replace(/^['"]|['"]$/g,"")?(e=o(t.target).data("product-id").replace(/^['"]|['"]$/g,""),e=c.add_to_cart_url.replace("price_id%5D","price_id%5D="+encodeURIComponent(e)),window.location.href=e):this.openSurecartCoursesModal(t)},openSurecartCoursesModal:function(t){t.preventDefault(),o("#masteriyoSurecartModal").removeClass("masteriyo-hidden"),this.fetchPrices(t)},fetchPrices:function(t){o("#masteriyoSurecartModal .masteriyo-surecart-course__lists--loading-text");var t=o(t.target).data("course-id")?o(t.target).data("course-id"):0,e=o("#masteriyoSurecartModal .masteriyo-surecart-course__lists"),r=(o("#masteriyoSurecartModal .masteriyo-surecart-course__lists--list"),o("#masteriyoSurecartModal .masteriyo-surecart-course__title")),a=o("#masteriyoSurecartModal .masteriyo-surecart-course__empty-state"),s=r.text(),i=c.fetching_text;r.text(i),e.hide(),a.hide(),o.ajax({url:c.restUrl,type:"GET",dataType:"json",data:{course_id:t},success:function(t){u.renderPricesList(t||[])},error:function(){a.show(),r.text(s)}})},renderPricesList:function(t){var e=o("#masteriyoSurecartModal .masteriyo-surecart-course__lists"),a=o("#masteriyoSurecartModal .masteriyo-surecart-course__lists--list"),r=o("#masteriyoSurecartModal .masteriyo-surecart-course__title"),s=o("#masteriyoSurecartModal .masteriyo-surecart-course__empty-state");a.html(""),r.text(t[0].course_name),0===t.length?(s.show(),e.hide()):(s.hide(),e.show(),r.show(),t.forEach(function(t){var e=c.add_to_cart_url.replace("price_id%5D","price_id%5D="+encodeURIComponent(t.id)),r=c.add_to_cart_text,r=o(`
									<li class="masteriyo-surecart-course__lists--list-item" style="list-style-type: none; margin-bottom: 10px;">
											<input type="button" style="width: 100%;" class="masteriyo-surecart-course__lists--list" name="surecart_prices" value="${r} ${t.actual_amount} ${t.name?"("+t.name+")":""}"
											id="masteriyo-surecart-course-option-${t.id}" target="_blank" onclick="window.location.href='${e}'">
									</li>
							`);a.append(r)}))},closeSurecartCoursesModal:function(){o("#masteriyoSurecartModal").addClass("masteriyo-hidden")}};u.init()}(jQuery,window.MASTERIYO_SURECART_COURSES_DATA);